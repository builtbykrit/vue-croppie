{"version":3,"file":"vue-croppie.min.js","sources":["../node_modules/croppie/croppie.js","../src/VueCroppieComponent.js","../src/index.js"],"sourcesContent":["/*************************\r\n * Croppie\r\n * Copyright 2018\r\n * Foliotek\r\n * Version: 2.6.2\r\n *************************/\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define(['exports'], factory);\r\n    } else if (typeof exports === 'object' && typeof exports.nodeName !== 'string') {\r\n        // CommonJS\r\n        factory(exports);\r\n    } else {\r\n        // Browser globals\r\n        factory((root.commonJsStrict = {}));\r\n    }\r\n}(this, function (exports) {\r\n\r\n    /* Polyfills */\r\n    if (typeof Promise !== 'function') {\r\n        /*! promise-polyfill 3.1.0 */\r\n        !function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if(\"object\"!==typeof this)throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!==typeof a)throw new TypeError(\"not a function\");this._state=null,this._value=null,this._deferreds=[],i(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void k(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function e(a){try{if(a===this)throw new TypeError(\"A promise cannot be resolved with itself.\");if(a&&(\"object\"===typeof a||\"function\"===typeof a)){var c=a.then;if(\"function\"===typeof c)return void i(b(c,a),b(e,this),b(f,this))}this._state=!0,this._value=a,g.call(this)}catch(d){f.call(this,d)}}function f(a){this._state=!1,this._value=a,g.call(this)}function g(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function h(a,b,c,d){this.onFulfilled=\"function\"===typeof a?a:null,this.onRejected=\"function\"===typeof b?b:null,this.resolve=c,this.reject=d}function i(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var j=setTimeout,k=\"function\"===typeof setImmediate&&setImmediate||function(a){j(a,1)},l=Array.isArray||function(a){return\"[object Array]\"===Object.prototype.toString.call(a)};c.prototype[\"catch\"]=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new h(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&(\"object\"===typeof g||\"function\"===typeof g)){var h=g.then;if(\"function\"===typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},c.resolve=function(a){return a&&\"object\"===typeof a&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},c._setImmediateFn=function(a){k=a},\"undefined\"!==typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)}(this);\r\n    }\r\n\r\n    if ( typeof window.CustomEvent !== \"function\" ) {\r\n        (function(){\r\n            function CustomEvent ( event, params ) {\r\n                params = params || { bubbles: false, cancelable: false, detail: undefined };\r\n                var evt = document.createEvent( 'CustomEvent' );\r\n                evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\r\n                return evt;\r\n            }\r\n            CustomEvent.prototype = window.Event.prototype;\r\n            window.CustomEvent = CustomEvent;\r\n        }());\r\n    }\r\n\r\n    if (!HTMLCanvasElement.prototype.toBlob) {\r\n        Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\r\n            value: function (callback, type, quality) {\r\n                var binStr = atob( this.toDataURL(type, quality).split(',')[1] ),\r\n                len = binStr.length,\r\n                arr = new Uint8Array(len);\r\n\r\n                for (var i=0; i<len; i++ ) {\r\n                    arr[i] = binStr.charCodeAt(i);\r\n                }\r\n\r\n                callback( new Blob( [arr], {type: type || 'image/png'} ) );\r\n            }\r\n        });\r\n    }\r\n    /* End Polyfills */\r\n\r\n    var cssPrefixes = ['Webkit', 'Moz', 'ms'],\r\n        emptyStyles = document.createElement('div').style,\r\n        EXIF_NORM = [1,8,3,6],\r\n        EXIF_FLIP = [2,7,4,5],\r\n        CSS_TRANS_ORG,\r\n        CSS_TRANSFORM,\r\n        CSS_USERSELECT;\r\n\r\n    function vendorPrefix(prop) {\r\n        if (prop in emptyStyles) {\r\n            return prop;\r\n        }\r\n\r\n        var capProp = prop[0].toUpperCase() + prop.slice(1),\r\n            i = cssPrefixes.length;\r\n\r\n        while (i--) {\r\n            prop = cssPrefixes[i] + capProp;\r\n            if (prop in emptyStyles) {\r\n                return prop;\r\n            }\r\n        }\r\n    }\r\n\r\n    CSS_TRANSFORM = vendorPrefix('transform');\r\n    CSS_TRANS_ORG = vendorPrefix('transformOrigin');\r\n    CSS_USERSELECT = vendorPrefix('userSelect');\r\n\r\n    function getExifOffset(ornt, rotate) {\r\n        var arr = EXIF_NORM.indexOf(ornt) > -1 ? EXIF_NORM : EXIF_FLIP,\r\n            index = arr.indexOf(ornt),\r\n            offset = (rotate / 90) % arr.length;// 180 = 2%4 = 2 shift exif by 2 indexes\r\n\r\n        return arr[(arr.length + index + (offset % arr.length)) % arr.length];\r\n    }\r\n\r\n    // Credits to : Andrew Dupont - http://andrewdupont.net/2009/08/28/deep-extending-objects-in-javascript/\r\n    function deepExtend(destination, source) {\r\n        destination = destination || {};\r\n        for (var property in source) {\r\n            if (source[property] && source[property].constructor && source[property].constructor === Object) {\r\n                destination[property] = destination[property] || {};\r\n                deepExtend(destination[property], source[property]);\r\n            } else {\r\n                destination[property] = source[property];\r\n            }\r\n        }\r\n        return destination;\r\n    }\r\n\r\n    function clone(object) {\r\n        return deepExtend({}, object);\r\n    }\r\n\r\n    function debounce(func, wait, immediate) {\r\n        var timeout;\r\n        return function () {\r\n            var context = this, args = arguments;\r\n            var later = function () {\r\n                timeout = null;\r\n                if (!immediate) func.apply(context, args);\r\n            };\r\n            var callNow = immediate && !timeout;\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n            if (callNow) func.apply(context, args);\r\n        };\r\n    }\r\n\r\n    function dispatchChange(element) {\r\n        if (\"createEvent\" in document) {\r\n            var evt = document.createEvent(\"HTMLEvents\");\r\n            evt.initEvent(\"change\", false, true);\r\n            element.dispatchEvent(evt);\r\n        }\r\n        else {\r\n            element.fireEvent(\"onchange\");\r\n        }\r\n    }\r\n\r\n    //http://jsperf.com/vanilla-css\r\n    function css(el, styles, val) {\r\n        if (typeof (styles) === 'string') {\r\n            var tmp = styles;\r\n            styles = {};\r\n            styles[tmp] = val;\r\n        }\r\n\r\n        for (var prop in styles) {\r\n            el.style[prop] = styles[prop];\r\n        }\r\n    }\r\n\r\n    function addClass(el, c) {\r\n        if (el.classList) {\r\n            el.classList.add(c);\r\n        }\r\n        else {\r\n            el.className += ' ' + c;\r\n        }\r\n    }\r\n\r\n    function removeClass(el, c) {\r\n        if (el.classList) {\r\n            el.classList.remove(c);\r\n        }\r\n        else {\r\n            el.className = el.className.replace(c, '');\r\n        }\r\n    }\r\n\r\n    function setAttributes(el, attrs) {\r\n        for (var key in attrs) {\r\n            el.setAttribute(key, attrs[key]);\r\n        }\r\n    }\r\n\r\n    function num(v) {\r\n        return parseInt(v, 10);\r\n    }\r\n\r\n    /* Utilities */\r\n    function loadImage(src, doExif) {\r\n        var img = new Image();\r\n        img.style.opacity = 0;\r\n        return new Promise(function (resolve) {\r\n            function _resolve() {\r\n                img.style.opacity = 1;\r\n                setTimeout(function () {\r\n                    resolve(img);\r\n                }, 1);\r\n            }\r\n\r\n            img.removeAttribute('crossOrigin');\r\n            if (src.match(/^https?:\\/\\/|^\\/\\//)) {\r\n                img.setAttribute('crossOrigin', 'anonymous');\r\n            }\r\n\r\n            img.onload = function () {\r\n                if (doExif) {\r\n                    EXIF.getData(img, function () {\r\n                        _resolve();\r\n                    });\r\n                }\r\n                else {\r\n                    _resolve();\r\n                }\r\n            };\r\n            img.src = src;\r\n        });\r\n    }\r\n\r\n    function naturalImageDimensions(img, ornt) {\r\n        var w = img.naturalWidth;\r\n        var h = img.naturalHeight;\r\n        var orient = ornt || getExifOrientation(img);\r\n        if (orient && orient >= 5) {\r\n            var x= w;\r\n            w = h;\r\n            h = x;\r\n        }\r\n        return { width: w, height: h };\r\n    }\r\n\r\n    /* CSS Transform Prototype */\r\n    var TRANSLATE_OPTS = {\r\n        'translate3d': {\r\n            suffix: ', 0px'\r\n        },\r\n        'translate': {\r\n            suffix: ''\r\n        }\r\n    };\r\n    var Transform = function (x, y, scale) {\r\n        this.x = parseFloat(x);\r\n        this.y = parseFloat(y);\r\n        this.scale = parseFloat(scale);\r\n    };\r\n\r\n    Transform.parse = function (v) {\r\n        if (v.style) {\r\n            return Transform.parse(v.style[CSS_TRANSFORM]);\r\n        }\r\n        else if (v.indexOf('matrix') > -1 || v.indexOf('none') > -1) {\r\n            return Transform.fromMatrix(v);\r\n        }\r\n        else {\r\n            return Transform.fromString(v);\r\n        }\r\n    };\r\n\r\n    Transform.fromMatrix = function (v) {\r\n        var vals = v.substring(7).split(',');\r\n        if (!vals.length || v === 'none') {\r\n            vals = [1, 0, 0, 1, 0, 0];\r\n        }\r\n\r\n        return new Transform(num(vals[4]), num(vals[5]), parseFloat(vals[0]));\r\n    };\r\n\r\n    Transform.fromString = function (v) {\r\n        var values = v.split(') '),\r\n            translate = values[0].substring(Croppie.globals.translate.length + 1).split(','),\r\n            scale = values.length > 1 ? values[1].substring(6) : 1,\r\n            x = translate.length > 1 ? translate[0] : 0,\r\n            y = translate.length > 1 ? translate[1] : 0;\r\n\r\n        return new Transform(x, y, scale);\r\n    };\r\n\r\n    Transform.prototype.toString = function () {\r\n        var suffix = TRANSLATE_OPTS[Croppie.globals.translate].suffix || '';\r\n        return Croppie.globals.translate + '(' + this.x + 'px, ' + this.y + 'px' + suffix + ') scale(' + this.scale + ')';\r\n    };\r\n\r\n    var TransformOrigin = function (el) {\r\n        if (!el || !el.style[CSS_TRANS_ORG]) {\r\n            this.x = 0;\r\n            this.y = 0;\r\n            return;\r\n        }\r\n        var css = el.style[CSS_TRANS_ORG].split(' ');\r\n        this.x = parseFloat(css[0]);\r\n        this.y = parseFloat(css[1]);\r\n    };\r\n\r\n    TransformOrigin.prototype.toString = function () {\r\n        return this.x + 'px ' + this.y + 'px';\r\n    };\r\n\r\n    function getExifOrientation (img) {\r\n        return img.exifdata ? img.exifdata.Orientation : 1;\r\n    }\r\n\r\n    function drawCanvas(canvas, img, orientation) {\r\n        var width = img.width,\r\n            height = img.height,\r\n            ctx = canvas.getContext('2d');\r\n\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n\r\n        ctx.save();\r\n        switch (orientation) {\r\n          case 2:\r\n             ctx.translate(width, 0);\r\n             ctx.scale(-1, 1);\r\n             break;\r\n\r\n          case 3:\r\n              ctx.translate(width, height);\r\n              ctx.rotate(180*Math.PI/180);\r\n              break;\r\n\r\n          case 4:\r\n              ctx.translate(0, height);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 5:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(90*Math.PI/180);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 6:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(90*Math.PI/180);\r\n              ctx.translate(0, -height);\r\n              break;\r\n\r\n          case 7:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(-90*Math.PI/180);\r\n              ctx.translate(-width, height);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 8:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.translate(0, width);\r\n              ctx.rotate(-90*Math.PI/180);\r\n              break;\r\n        }\r\n        ctx.drawImage(img, 0,0, width, height);\r\n        ctx.restore();\r\n    }\r\n\r\n    /* Private Methods */\r\n    function _create() {\r\n        var self = this,\r\n            contClass = 'croppie-container',\r\n            customViewportClass = self.options.viewport.type ? 'cr-vp-' + self.options.viewport.type : null,\r\n            boundary, img, viewport, overlay, bw, bh;\r\n\r\n        self.options.useCanvas = self.options.enableOrientation || _hasExif.call(self);\r\n        // Properties on class\r\n        self.data = {};\r\n        self.elements = {};\r\n\r\n        boundary = self.elements.boundary = document.createElement('div');\r\n        viewport = self.elements.viewport = document.createElement('div');\r\n        img = self.elements.img = document.createElement('img');\r\n        overlay = self.elements.overlay = document.createElement('div');\r\n\r\n        if (self.options.useCanvas) {\r\n            self.elements.canvas = document.createElement('canvas');\r\n            self.elements.preview = self.elements.canvas;\r\n        }\r\n        else {\r\n            self.elements.preview = self.elements.img;\r\n        }\r\n\r\n        addClass(boundary, 'cr-boundary');\r\n        boundary.setAttribute('aria-dropeffect', 'none');\r\n        bw = self.options.boundary.width;\r\n        bh = self.options.boundary.height;\r\n        css(boundary, {\r\n            width: (bw + (isNaN(bw) ? '' : 'px')),\r\n            height: (bh + (isNaN(bh) ? '' : 'px'))\r\n        });\r\n\r\n        addClass(viewport, 'cr-viewport');\r\n        if (customViewportClass) {\r\n            addClass(viewport, customViewportClass);\r\n        }\r\n        css(viewport, {\r\n            width: self.options.viewport.width + 'px',\r\n            height: self.options.viewport.height + 'px'\r\n        });\r\n        viewport.setAttribute('tabindex', 0);\r\n\r\n        addClass(self.elements.preview, 'cr-image');\r\n        setAttributes(self.elements.preview, { 'alt': 'preview', 'aria-grabbed': 'false' });\r\n        addClass(overlay, 'cr-overlay');\r\n\r\n        self.element.appendChild(boundary);\r\n        boundary.appendChild(self.elements.preview);\r\n        boundary.appendChild(viewport);\r\n        boundary.appendChild(overlay);\r\n\r\n        addClass(self.element, contClass);\r\n        if (self.options.customClass) {\r\n            addClass(self.element, self.options.customClass);\r\n        }\r\n\r\n        _initDraggable.call(this);\r\n\r\n        if (self.options.enableZoom) {\r\n            _initializeZoom.call(self);\r\n        }\r\n\r\n        // if (self.options.enableOrientation) {\r\n        //     _initRotationControls.call(self);\r\n        // }\r\n\r\n        if (self.options.enableResize) {\r\n            _initializeResize.call(self);\r\n        }\r\n    }\r\n\r\n    // function _initRotationControls () {\r\n    //     var self = this,\r\n    //         wrap, btnLeft, btnRight, iLeft, iRight;\r\n\r\n    //     wrap = document.createElement('div');\r\n    //     self.elements.orientationBtnLeft = btnLeft = document.createElement('button');\r\n    //     self.elements.orientationBtnRight = btnRight = document.createElement('button');\r\n\r\n    //     wrap.appendChild(btnLeft);\r\n    //     wrap.appendChild(btnRight);\r\n\r\n    //     iLeft = document.createElement('i');\r\n    //     iRight = document.createElement('i');\r\n    //     btnLeft.appendChild(iLeft);\r\n    //     btnRight.appendChild(iRight);\r\n\r\n    //     addClass(wrap, 'cr-rotate-controls');\r\n    //     addClass(btnLeft, 'cr-rotate-l');\r\n    //     addClass(btnRight, 'cr-rotate-r');\r\n\r\n    //     self.elements.boundary.appendChild(wrap);\r\n\r\n    //     btnLeft.addEventListener('click', function () {\r\n    //         self.rotate(-90);\r\n    //     });\r\n    //     btnRight.addEventListener('click', function () {\r\n    //         self.rotate(90);\r\n    //     });\r\n    // }\r\n\r\n    function _hasExif() {\r\n        return this.options.enableExif && window.EXIF;\r\n    }\r\n\r\n    function _initializeResize () {\r\n        var self = this;\r\n        var wrap = document.createElement('div');\r\n        var isDragging = false;\r\n        var direction;\r\n        var originalX;\r\n        var originalY;\r\n        var minSize = 50;\r\n        var maxWidth;\r\n        var maxHeight;\r\n        var vr;\r\n        var hr;\r\n\r\n        addClass(wrap, 'cr-resizer');\r\n        css(wrap, {\r\n            width: this.options.viewport.width + 'px',\r\n            height: this.options.viewport.height + 'px'\r\n        });\r\n\r\n        if (this.options.resizeControls.height) {\r\n            vr = document.createElement('div');\r\n            addClass(vr, 'cr-resizer-vertical');\r\n            wrap.appendChild(vr);\r\n        }\r\n\r\n        if (this.options.resizeControls.width) {\r\n            hr = document.createElement('div');\r\n            addClass(hr, 'cr-resizer-horisontal');\r\n            wrap.appendChild(hr);\r\n        }\r\n\r\n        function mouseDown(ev) {\r\n            if (ev.button !== undefined && ev.button !== 0) return;\r\n\r\n            ev.preventDefault();\r\n            if (isDragging) {\r\n                return;\r\n            }\r\n\r\n            var overlayRect = self.elements.overlay.getBoundingClientRect();\r\n\r\n            isDragging = true;\r\n            originalX = ev.pageX;\r\n            originalY = ev.pageY;\r\n            direction = ev.currentTarget.className.indexOf('vertical') !== -1 ? 'v' : 'h';\r\n            maxWidth = overlayRect.width;\r\n            maxHeight = overlayRect.height;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                originalX = touches.pageX;\r\n                originalY = touches.pageY;\r\n            }\r\n\r\n            window.addEventListener('mousemove', mouseMove);\r\n            window.addEventListener('touchmove', mouseMove);\r\n            window.addEventListener('mouseup', mouseUp);\r\n            window.addEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = 'none';\r\n        }\r\n\r\n        function mouseMove(ev) {\r\n            var pageX = ev.pageX;\r\n            var pageY = ev.pageY;\r\n\r\n            ev.preventDefault();\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                pageX = touches.pageX;\r\n                pageY = touches.pageY;\r\n            }\r\n\r\n            var deltaX = pageX - originalX;\r\n            var deltaY = pageY - originalY;\r\n            var newHeight = self.options.viewport.height + deltaY;\r\n            var newWidth = self.options.viewport.width + deltaX;\r\n\r\n            if (direction === 'v' && newHeight >= minSize && newHeight <= maxHeight) {\r\n                css(wrap, {\r\n                    height: newHeight + 'px'\r\n                });\r\n\r\n                self.options.boundary.height += deltaY;\r\n                css(self.elements.boundary, {\r\n                    height: self.options.boundary.height + 'px'\r\n                });\r\n\r\n                self.options.viewport.height += deltaY;\r\n                css(self.elements.viewport, {\r\n                    height: self.options.viewport.height + 'px'\r\n                });\r\n            }\r\n            else if (direction === 'h' && newWidth >= minSize && newWidth <= maxWidth) {\r\n                css(wrap, {\r\n                    width: newWidth + 'px'\r\n                });\r\n\r\n                self.options.boundary.width += deltaX;\r\n                css(self.elements.boundary, {\r\n                    width: self.options.boundary.width + 'px'\r\n                });\r\n\r\n                self.options.viewport.width += deltaX;\r\n                css(self.elements.viewport, {\r\n                    width: self.options.viewport.width + 'px'\r\n                });\r\n            }\r\n\r\n            _updateOverlay.call(self);\r\n            _updateZoomLimits.call(self);\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalY = pageY;\r\n            originalX = pageX;\r\n        }\r\n\r\n        function mouseUp() {\r\n            isDragging = false;\r\n            window.removeEventListener('mousemove', mouseMove);\r\n            window.removeEventListener('touchmove', mouseMove);\r\n            window.removeEventListener('mouseup', mouseUp);\r\n            window.removeEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n        }\r\n\r\n        if (vr) {\r\n            vr.addEventListener('mousedown', mouseDown);\r\n            vr.addEventListener('touchstart', mouseDown);\r\n        }\r\n\r\n        if (hr) {\r\n            hr.addEventListener('mousedown', mouseDown);\r\n            hr.addEventListener('touchstart', mouseDown);\r\n        }\r\n\r\n        this.elements.boundary.appendChild(wrap);\r\n    }\r\n\r\n    function _setZoomerVal(v) {\r\n        if (this.options.enableZoom) {\r\n            var z = this.elements.zoomer,\r\n                val = fix(v, 4);\r\n\r\n            z.value = Math.max(z.min, Math.min(z.max, val));\r\n        }\r\n    }\r\n\r\n    function _initializeZoom() {\r\n        var self = this,\r\n            wrap = self.elements.zoomerWrap = document.createElement('div'),\r\n            zoomer = self.elements.zoomer = document.createElement('input');\r\n\r\n        addClass(wrap, 'cr-slider-wrap');\r\n        addClass(zoomer, 'cr-slider');\r\n        zoomer.type = 'range';\r\n        zoomer.step = '0.0001';\r\n        zoomer.value = 1;\r\n        zoomer.style.display = self.options.showZoomer ? '' : 'none';\r\n        zoomer.setAttribute('aria-label', 'zoom');\r\n\r\n        self.element.appendChild(wrap);\r\n        wrap.appendChild(zoomer);\r\n\r\n        self._currentZoom = 1;\r\n\r\n        function change() {\r\n            _onZoom.call(self, {\r\n                value: parseFloat(zoomer.value),\r\n                origin: new TransformOrigin(self.elements.preview),\r\n                viewportRect: self.elements.viewport.getBoundingClientRect(),\r\n                transform: Transform.parse(self.elements.preview)\r\n            });\r\n        }\r\n\r\n        function scroll(ev) {\r\n            var delta, targetZoom;\r\n\r\n            if(self.options.mouseWheelZoom === 'ctrl' && ev.ctrlKey !== true){\r\n              return 0; \r\n            } else if (ev.wheelDelta) {\r\n                delta = ev.wheelDelta / 1200; //wheelDelta min: -120 max: 120 // max x 10 x 2\r\n            } else if (ev.deltaY) {\r\n                delta = ev.deltaY / 1060; //deltaY min: -53 max: 53 // max x 10 x 2\r\n            } else if (ev.detail) {\r\n                delta = ev.detail / -60; //delta min: -3 max: 3 // max x 10 x 2\r\n            } else {\r\n                delta = 0;\r\n            }\r\n\r\n            targetZoom = self._currentZoom + (delta * self._currentZoom);\r\n\r\n            ev.preventDefault();\r\n            _setZoomerVal.call(self, targetZoom);\r\n            change.call(self);\r\n        }\r\n\r\n        self.elements.zoomer.addEventListener('input', change);// this is being fired twice on keypress\r\n        self.elements.zoomer.addEventListener('change', change);\r\n\r\n        if (self.options.mouseWheelZoom) {\r\n            self.elements.boundary.addEventListener('mousewheel', scroll);\r\n            self.elements.boundary.addEventListener('DOMMouseScroll', scroll);\r\n        }\r\n    }\r\n\r\n    function _onZoom(ui) {\r\n        var self = this,\r\n            transform = ui ? ui.transform : Transform.parse(self.elements.preview),\r\n            vpRect = ui ? ui.viewportRect : self.elements.viewport.getBoundingClientRect(),\r\n            origin = ui ? ui.origin : new TransformOrigin(self.elements.preview);\r\n\r\n        function applyCss() {\r\n            var transCss = {};\r\n            transCss[CSS_TRANSFORM] = transform.toString();\r\n            transCss[CSS_TRANS_ORG] = origin.toString();\r\n            css(self.elements.preview, transCss);\r\n        }\r\n\r\n        self._currentZoom = ui ? ui.value : self._currentZoom;\r\n        transform.scale = self._currentZoom;\r\n        self.elements.zoomer.setAttribute('aria-valuenow', self._currentZoom);\r\n        applyCss();\r\n\r\n        if (self.options.enforceBoundary) {\r\n            var boundaries = _getVirtualBoundaries.call(self, vpRect),\r\n                transBoundaries = boundaries.translate,\r\n                oBoundaries = boundaries.origin;\r\n\r\n            if (transform.x >= transBoundaries.maxX) {\r\n                origin.x = oBoundaries.minX;\r\n                transform.x = transBoundaries.maxX;\r\n            }\r\n\r\n            if (transform.x <= transBoundaries.minX) {\r\n                origin.x = oBoundaries.maxX;\r\n                transform.x = transBoundaries.minX;\r\n            }\r\n\r\n            if (transform.y >= transBoundaries.maxY) {\r\n                origin.y = oBoundaries.minY;\r\n                transform.y = transBoundaries.maxY;\r\n            }\r\n\r\n            if (transform.y <= transBoundaries.minY) {\r\n                origin.y = oBoundaries.maxY;\r\n                transform.y = transBoundaries.minY;\r\n            }\r\n        }\r\n        applyCss();\r\n        _debouncedOverlay.call(self);\r\n        _triggerUpdate.call(self);\r\n    }\r\n\r\n    function _getVirtualBoundaries(viewport) {\r\n        var self = this,\r\n            scale = self._currentZoom,\r\n            vpWidth = viewport.width,\r\n            vpHeight = viewport.height,\r\n            centerFromBoundaryX = self.elements.boundary.clientWidth / 2,\r\n            centerFromBoundaryY = self.elements.boundary.clientHeight / 2,\r\n            imgRect = self.elements.preview.getBoundingClientRect(),\r\n            curImgWidth = imgRect.width,\r\n            curImgHeight = imgRect.height,\r\n            halfWidth = vpWidth / 2,\r\n            halfHeight = vpHeight / 2;\r\n\r\n        var maxX = ((halfWidth / scale) - centerFromBoundaryX) * -1;\r\n        var minX = maxX - ((curImgWidth * (1 / scale)) - (vpWidth * (1 / scale)));\r\n\r\n        var maxY = ((halfHeight / scale) - centerFromBoundaryY) * -1;\r\n        var minY = maxY - ((curImgHeight * (1 / scale)) - (vpHeight * (1 / scale)));\r\n\r\n        var originMinX = (1 / scale) * halfWidth;\r\n        var originMaxX = (curImgWidth * (1 / scale)) - originMinX;\r\n\r\n        var originMinY = (1 / scale) * halfHeight;\r\n        var originMaxY = (curImgHeight * (1 / scale)) - originMinY;\r\n\r\n        return {\r\n            translate: {\r\n                maxX: maxX,\r\n                minX: minX,\r\n                maxY: maxY,\r\n                minY: minY\r\n            },\r\n            origin: {\r\n                maxX: originMaxX,\r\n                minX: originMinX,\r\n                maxY: originMaxY,\r\n                minY: originMinY\r\n            }\r\n        };\r\n    }\r\n\r\n    function _updateCenterPoint() {\r\n        var self = this,\r\n            scale = self._currentZoom,\r\n            data = self.elements.preview.getBoundingClientRect(),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            transform = Transform.parse(self.elements.preview.style[CSS_TRANSFORM]),\r\n            pc = new TransformOrigin(self.elements.preview),\r\n            top = (vpData.top - data.top) + (vpData.height / 2),\r\n            left = (vpData.left - data.left) + (vpData.width / 2),\r\n            center = {},\r\n            adj = {};\r\n\r\n        center.y = top / scale;\r\n        center.x = left / scale;\r\n\r\n        adj.y = (center.y - pc.y) * (1 - scale);\r\n        adj.x = (center.x - pc.x) * (1 - scale);\r\n\r\n        transform.x -= adj.x;\r\n        transform.y -= adj.y;\r\n\r\n        var newCss = {};\r\n        newCss[CSS_TRANS_ORG] = center.x + 'px ' + center.y + 'px';\r\n        newCss[CSS_TRANSFORM] = transform.toString();\r\n        css(self.elements.preview, newCss);\r\n    }\r\n\r\n    function _initDraggable() {\r\n        var self = this,\r\n            isDragging = false,\r\n            originalX,\r\n            originalY,\r\n            originalDistance,\r\n            vpRect,\r\n            transform;\r\n\r\n        function assignTransformCoordinates(deltaX, deltaY) {\r\n            var imgRect = self.elements.preview.getBoundingClientRect(),\r\n                top = transform.y + deltaY,\r\n                left = transform.x + deltaX;\r\n\r\n            if (self.options.enforceBoundary) {\r\n                if (vpRect.top > imgRect.top + deltaY && vpRect.bottom < imgRect.bottom + deltaY) {\r\n                    transform.y = top;\r\n                }\r\n\r\n                if (vpRect.left > imgRect.left + deltaX && vpRect.right < imgRect.right + deltaX) {\r\n                    transform.x = left;\r\n                }\r\n            }\r\n            else {\r\n                transform.y = top;\r\n                transform.x = left;\r\n            }\r\n        }\r\n\r\n        function toggleGrabState(isDragging) {\r\n          self.elements.preview.setAttribute('aria-grabbed', isDragging);\r\n          self.elements.boundary.setAttribute('aria-dropeffect', isDragging? 'move': 'none');\r\n        }\r\n\r\n        function keyDown(ev) {\r\n            var LEFT_ARROW  = 37,\r\n                UP_ARROW    = 38,\r\n                RIGHT_ARROW = 39,\r\n                DOWN_ARROW  = 40;\r\n\r\n            if (ev.shiftKey && (ev.keyCode === UP_ARROW || ev.keyCode === DOWN_ARROW)) {\r\n                var zoom = 0.0;\r\n                if (ev.keyCode === UP_ARROW) {\r\n                    zoom = parseFloat(self.elements.zoomer.value, 10) + parseFloat(self.elements.zoomer.step, 10)\r\n                }\r\n                else {\r\n                    zoom = parseFloat(self.elements.zoomer.value, 10) - parseFloat(self.elements.zoomer.step, 10)\r\n                }\r\n                self.setZoom(zoom);\r\n            }\r\n            else if (self.options.enableKeyMovement && (ev.keyCode >= 37 && ev.keyCode <= 40)) {\r\n                ev.preventDefault();\r\n                var movement = parseKeyDown(ev.keyCode);\r\n\r\n                transform = Transform.parse(self.elements.preview);\r\n                document.body.style[CSS_USERSELECT] = 'none';\r\n                vpRect = self.elements.viewport.getBoundingClientRect();\r\n                keyMove(movement);\r\n            }\r\n\r\n            function parseKeyDown(key) {\r\n                switch (key) {\r\n                    case LEFT_ARROW:\r\n                        return [1, 0];\r\n                    case UP_ARROW:\r\n                        return [0, 1];\r\n                    case RIGHT_ARROW:\r\n                        return [-1, 0];\r\n                    case DOWN_ARROW:\r\n                        return [0, -1];\r\n                }\r\n            }\r\n        }\r\n\r\n        function keyMove(movement) {\r\n            var deltaX = movement[0],\r\n                deltaY = movement[1],\r\n                newCss = {};\r\n\r\n            assignTransformCoordinates(deltaX, deltaY);\r\n\r\n            newCss[CSS_TRANSFORM] = transform.toString();\r\n            css(self.elements.preview, newCss);\r\n            _updateOverlay.call(self);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalDistance = 0;\r\n        }\r\n\r\n        function mouseDown(ev) {\r\n            if (ev.button !== undefined && ev.button !== 0) return;\r\n\r\n            ev.preventDefault();\r\n            if (isDragging) return;\r\n            isDragging = true;\r\n            originalX = ev.pageX;\r\n            originalY = ev.pageY;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                originalX = touches.pageX;\r\n                originalY = touches.pageY;\r\n            }\r\n            toggleGrabState(isDragging);\r\n            transform = Transform.parse(self.elements.preview);\r\n            window.addEventListener('mousemove', mouseMove);\r\n            window.addEventListener('touchmove', mouseMove);\r\n            window.addEventListener('mouseup', mouseUp);\r\n            window.addEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = 'none';\r\n            vpRect = self.elements.viewport.getBoundingClientRect();\r\n        }\r\n\r\n        function mouseMove(ev) {\r\n            ev.preventDefault();\r\n            var pageX = ev.pageX,\r\n                pageY = ev.pageY;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                pageX = touches.pageX;\r\n                pageY = touches.pageY;\r\n            }\r\n\r\n            var deltaX = pageX - originalX,\r\n                deltaY = pageY - originalY,\r\n                newCss = {};\r\n\r\n            if (ev.type === 'touchmove') {\r\n                if (ev.touches.length > 1) {\r\n                    var touch1 = ev.touches[0];\r\n                    var touch2 = ev.touches[1];\r\n                    var dist = Math.sqrt((touch1.pageX - touch2.pageX) * (touch1.pageX - touch2.pageX) + (touch1.pageY - touch2.pageY) * (touch1.pageY - touch2.pageY));\r\n\r\n                    if (!originalDistance) {\r\n                        originalDistance = dist / self._currentZoom;\r\n                    }\r\n\r\n                    var scale = dist / originalDistance;\r\n\r\n                    _setZoomerVal.call(self, scale);\r\n                    dispatchChange(self.elements.zoomer);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            assignTransformCoordinates(deltaX, deltaY);\r\n\r\n            newCss[CSS_TRANSFORM] = transform.toString();\r\n            css(self.elements.preview, newCss);\r\n            _updateOverlay.call(self);\r\n            originalY = pageY;\r\n            originalX = pageX;\r\n        }\r\n\r\n        function mouseUp() {\r\n            isDragging = false;\r\n            toggleGrabState(isDragging);\r\n            window.removeEventListener('mousemove', mouseMove);\r\n            window.removeEventListener('touchmove', mouseMove);\r\n            window.removeEventListener('mouseup', mouseUp);\r\n            window.removeEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalDistance = 0;\r\n        }\r\n\r\n        self.elements.overlay.addEventListener('mousedown', mouseDown);\r\n        self.elements.viewport.addEventListener('keydown', keyDown);\r\n        self.elements.overlay.addEventListener('touchstart', mouseDown);\r\n    }\r\n\r\n    function _updateOverlay() {\r\n        if (!this.elements) return; // since this is debounced, it can be fired after destroy\r\n        var self = this,\r\n            boundRect = self.elements.boundary.getBoundingClientRect(),\r\n            imgData = self.elements.preview.getBoundingClientRect();\r\n\r\n        css(self.elements.overlay, {\r\n            width: imgData.width + 'px',\r\n            height: imgData.height + 'px',\r\n            top: (imgData.top - boundRect.top) + 'px',\r\n            left: (imgData.left - boundRect.left) + 'px'\r\n        });\r\n    }\r\n    var _debouncedOverlay = debounce(_updateOverlay, 500);\r\n\r\n    function _triggerUpdate() {\r\n        var self = this,\r\n            data = self.get(),\r\n            ev;\r\n\r\n        if (!_isVisible.call(self)) {\r\n            return;\r\n        }\r\n\r\n        self.options.update.call(self, data);\r\n        if (self.$ && typeof Prototype === 'undefined') {\r\n            self.$(self.element).trigger('update.croppie', data);\r\n        }\r\n        else {\r\n            var ev;\r\n            if (window.CustomEvent) {\r\n                ev = new CustomEvent('update', { detail: data });\r\n            } else {\r\n                ev = document.createEvent('CustomEvent');\r\n                ev.initCustomEvent('update', true, true, data);\r\n            }\r\n\r\n            self.element.dispatchEvent(ev);\r\n        }\r\n    }\r\n\r\n    function _isVisible() {\r\n        return this.elements.preview.offsetHeight > 0 && this.elements.preview.offsetWidth > 0;\r\n    }\r\n\r\n    function _updatePropertiesFromImage() {\r\n        var self = this,\r\n            initialZoom = 1,\r\n            cssReset = {},\r\n            img = self.elements.preview,\r\n            imgData = null,\r\n            transformReset = new Transform(0, 0, initialZoom),\r\n            originReset = new TransformOrigin(),\r\n            isVisible = _isVisible.call(self);\r\n\r\n        if (!isVisible || self.data.bound) {// if the croppie isn't visible or it doesn't need binding\r\n            return;\r\n        }\r\n\r\n        self.data.bound = true;\r\n        cssReset[CSS_TRANSFORM] = transformReset.toString();\r\n        cssReset[CSS_TRANS_ORG] = originReset.toString();\r\n        cssReset['opacity'] = 1;\r\n        css(img, cssReset);\r\n\r\n        imgData = self.elements.preview.getBoundingClientRect();\r\n\r\n        self._originalImageWidth = imgData.width;\r\n        self._originalImageHeight = imgData.height;\r\n        self.data.orientation = getExifOrientation(self.elements.img);\r\n\r\n        if (self.options.enableZoom) {\r\n            _updateZoomLimits.call(self, true);\r\n        }\r\n        else {\r\n            self._currentZoom = initialZoom;\r\n        }\r\n\r\n        transformReset.scale = self._currentZoom;\r\n        cssReset[CSS_TRANSFORM] = transformReset.toString();\r\n        css(img, cssReset);\r\n\r\n        if (self.data.points.length) {\r\n            _bindPoints.call(self, self.data.points);\r\n        }\r\n        else {\r\n            _centerImage.call(self);\r\n        }\r\n\r\n        _updateCenterPoint.call(self);\r\n        _updateOverlay.call(self);\r\n    }\r\n\r\n    function _updateZoomLimits (initial) {\r\n        var self = this,\r\n            minZoom = 0,\r\n            maxZoom = self.options.maxZoom || 1.5,\r\n            initialZoom,\r\n            defaultInitialZoom,\r\n            zoomer = self.elements.zoomer,\r\n            scale = parseFloat(zoomer.value),\r\n            boundaryData = self.elements.boundary.getBoundingClientRect(),\r\n            imgData = naturalImageDimensions(self.elements.img, self.data.orientation),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            minW,\r\n            minH;\r\n        if (self.options.enforceBoundary) {\r\n            minW = vpData.width / imgData.width;\r\n            minH = vpData.height / imgData.height;\r\n            minZoom = Math.max(minW, minH);\r\n        }\r\n\r\n        if (minZoom >= maxZoom) {\r\n            maxZoom = minZoom + 1;\r\n        }\r\n\r\n        zoomer.min = fix(minZoom, 4);\r\n        zoomer.max = fix(maxZoom, 4);\r\n        \r\n        if (!initial && (scale < zoomer.min || scale > zoomer.max)) {\r\n            _setZoomerVal.call(self, scale < zoomer.min ? zoomer.min : zoomer.max);\r\n        }\r\n        else if (initial) {\r\n            defaultInitialZoom = Math.max((boundaryData.width / imgData.width), (boundaryData.height / imgData.height));\r\n            initialZoom = self.data.boundZoom !== null ? self.data.boundZoom : defaultInitialZoom;\r\n            _setZoomerVal.call(self, initialZoom);\r\n        }\r\n\r\n        dispatchChange(zoomer);\r\n    }\r\n\r\n    function _bindPoints(points) {\r\n        if (points.length !== 4) {\r\n            throw \"Croppie - Invalid number of points supplied: \" + points;\r\n        }\r\n        var self = this,\r\n            pointsWidth = points[2] - points[0],\r\n            // pointsHeight = points[3] - points[1],\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            boundRect = self.elements.boundary.getBoundingClientRect(),\r\n            vpOffset = {\r\n                left: vpData.left - boundRect.left,\r\n                top: vpData.top - boundRect.top\r\n            },\r\n            scale = vpData.width / pointsWidth,\r\n            originTop = points[1],\r\n            originLeft = points[0],\r\n            transformTop = (-1 * points[1]) + vpOffset.top,\r\n            transformLeft = (-1 * points[0]) + vpOffset.left,\r\n            newCss = {};\r\n\r\n        newCss[CSS_TRANS_ORG] = originLeft + 'px ' + originTop + 'px';\r\n        newCss[CSS_TRANSFORM] = new Transform(transformLeft, transformTop, scale).toString();\r\n        css(self.elements.preview, newCss);\r\n\r\n        _setZoomerVal.call(self, scale);\r\n        self._currentZoom = scale;\r\n    }\r\n\r\n    function _centerImage() {\r\n        var self = this,\r\n            imgDim = self.elements.preview.getBoundingClientRect(),\r\n            vpDim = self.elements.viewport.getBoundingClientRect(),\r\n            boundDim = self.elements.boundary.getBoundingClientRect(),\r\n            vpLeft = vpDim.left - boundDim.left,\r\n            vpTop = vpDim.top - boundDim.top,\r\n            w = vpLeft - ((imgDim.width - vpDim.width) / 2),\r\n            h = vpTop - ((imgDim.height - vpDim.height) / 2),\r\n            transform = new Transform(w, h, self._currentZoom);\r\n\r\n        css(self.elements.preview, CSS_TRANSFORM, transform.toString());\r\n    }\r\n\r\n    function _transferImageToCanvas(customOrientation) {\r\n        var self = this,\r\n            canvas = self.elements.canvas,\r\n            img = self.elements.img,\r\n            ctx = canvas.getContext('2d'),\r\n            exif = _hasExif.call(self),\r\n            customOrientation = self.options.enableOrientation && customOrientation;\r\n\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n\r\n        if (exif && !customOrientation) {\r\n            var orientation = getExifOrientation(img);\r\n            drawCanvas(canvas, img, num(orientation || 0, 10));\r\n        }\r\n        else if (customOrientation) {\r\n            drawCanvas(canvas, img, customOrientation);\r\n        }\r\n    }\r\n\r\n    function _getCanvas(data) {\r\n        var self = this,\r\n            points = data.points,\r\n            left = num(points[0]),\r\n            top = num(points[1]),\r\n            right = num(points[2]),\r\n            bottom = num(points[3]),\r\n            width = right-left,\r\n            height = bottom-top,\r\n            circle = data.circle,\r\n            canvas = document.createElement('canvas'),\r\n            ctx = canvas.getContext('2d'),\r\n            startX = 0,\r\n            startY = 0,\r\n            canvasWidth = data.outputWidth || width,\r\n            canvasHeight = data.outputHeight || height,\r\n            customDimensions = (data.outputWidth && data.outputHeight),\r\n            outputWidthRatio = 1,\r\n            outputHeightRatio = 1;\r\n\r\n        canvas.width = canvasWidth;\r\n        canvas.height = canvasHeight;\r\n\r\n        if (data.backgroundColor) {\r\n            ctx.fillStyle = data.backgroundColor;\r\n            ctx.fillRect(0, 0, canvasWidth, canvasHeight);\r\n        }\r\n\r\n        if (self.options.enforceBoundary !== false) {\r\n            width = Math.min(width, self._originalImageWidth);\r\n            height = Math.min(height, self._originalImageHeight);\r\n        }\r\n    \r\n        // console.table({ left, right, top, bottom, canvasWidth, canvasHeight });\r\n        ctx.drawImage(this.elements.preview, left, top, width, height, startX, startY, canvasWidth, canvasHeight);\r\n        if (circle) {\r\n            ctx.fillStyle = '#fff';\r\n            ctx.globalCompositeOperation = 'destination-in';\r\n            ctx.beginPath();\r\n            ctx.arc(canvas.width / 2, canvas.height / 2, canvas.width / 2, 0, Math.PI * 2, true);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n        }\r\n        return canvas;\r\n    }\r\n\r\n    function _getHtmlResult(data) {\r\n        var points = data.points,\r\n            div = document.createElement('div'),\r\n            img = document.createElement('img'),\r\n            width = points[2] - points[0],\r\n            height = points[3] - points[1];\r\n\r\n        addClass(div, 'croppie-result');\r\n        div.appendChild(img);\r\n        css(img, {\r\n            left: (-1 * points[0]) + 'px',\r\n            top: (-1 * points[1]) + 'px'\r\n        });\r\n        img.src = data.url;\r\n        css(div, {\r\n            width: width + 'px',\r\n            height: height + 'px'\r\n        });\r\n\r\n        return div;\r\n    }\r\n\r\n    function _getBase64Result(data) {\r\n        return _getCanvas.call(this, data).toDataURL(data.format, data.quality);\r\n    }\r\n\r\n    function _getBlobResult(data) {\r\n        var self = this;\r\n        return new Promise(function (resolve, reject) {\r\n            _getCanvas.call(self, data).toBlob(function (blob) {\r\n                resolve(blob);\r\n            }, data.format, data.quality);\r\n        });\r\n    }\r\n\r\n    function _replaceImage(img) {\r\n        if (this.elements.img.parentNode) {\r\n            Array.prototype.forEach.call(this.elements.img.classList, function(c) { img.classList.add(c); });\r\n            this.elements.img.parentNode.replaceChild(img, this.elements.img);\r\n            this.elements.preview = img; // if the img is attached to the DOM, they're not using the canvas\r\n        }\r\n        this.elements.img = img;\r\n    }\r\n\r\n    function _bind(options, cb) {\r\n        var self = this,\r\n            url,\r\n            points = [],\r\n            zoom = null,\r\n            hasExif = _hasExif.call(self);\r\n\r\n        if (typeof (options) === 'string') {\r\n            url = options;\r\n            options = {};\r\n        }\r\n        else if (Array.isArray(options)) {\r\n            points = options.slice();\r\n        }\r\n        else if (typeof (options) === 'undefined' && self.data.url) { //refreshing\r\n            _updatePropertiesFromImage.call(self);\r\n            _triggerUpdate.call(self);\r\n            return null;\r\n        }\r\n        else {\r\n            url = options.url;\r\n            points = options.points || [];\r\n            zoom = typeof(options.zoom) === 'undefined' ? null : options.zoom;\r\n        }\r\n\r\n        self.data.bound = false;\r\n        self.data.url = url || self.data.url;\r\n        self.data.boundZoom = zoom;\r\n\r\n        return loadImage(url, hasExif).then(function (img) {\r\n            _replaceImage.call(self, img);\r\n            if (!points.length) {\r\n                var natDim = naturalImageDimensions(img);\r\n                var rect = self.elements.viewport.getBoundingClientRect();\r\n                var aspectRatio = rect.width / rect.height;\r\n                var imgAspectRatio = natDim.width / natDim.height;\r\n                var width, height;\r\n\r\n                if (imgAspectRatio > aspectRatio) {\r\n                    height = natDim.height;\r\n                    width = height * aspectRatio;\r\n                }\r\n                else {\r\n                    width = natDim.width;\r\n                    height = natDim.height / aspectRatio;\r\n                }\r\n\r\n                var x0 = (natDim.width - width) / 2;\r\n                var y0 = (natDim.height - height) / 2;\r\n                var x1 = x0 + width;\r\n                var y1 = y0 + height;\r\n                self.data.points = [x0, y0, x1, y1];\r\n            }\r\n            else if (self.options.relative) {\r\n                points = [\r\n                    points[0] * img.naturalWidth / 100,\r\n                    points[1] * img.naturalHeight / 100,\r\n                    points[2] * img.naturalWidth / 100,\r\n                    points[3] * img.naturalHeight / 100\r\n                ];\r\n            }\r\n\r\n            self.data.points = points.map(function (p) {\r\n                return parseFloat(p);\r\n            });\r\n            if (self.options.useCanvas) {\r\n                _transferImageToCanvas.call(self, options.orientation || 1);\r\n            }\r\n            _updatePropertiesFromImage.call(self);\r\n            _triggerUpdate.call(self);\r\n            cb && cb();\r\n        }).catch(function (err) {\r\n            console.error(\"Croppie:\" + err);\r\n        });\r\n    }\r\n\r\n    function fix(v, decimalPoints) {\r\n        return parseFloat(v).toFixed(decimalPoints || 0);\r\n    }\r\n\r\n    function _get() {\r\n        var self = this,\r\n            imgData = self.elements.preview.getBoundingClientRect(),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            x1 = vpData.left - imgData.left,\r\n            y1 = vpData.top - imgData.top,\r\n            widthDiff = (vpData.width - self.elements.viewport.offsetWidth) / 2, //border\r\n            heightDiff = (vpData.height - self.elements.viewport.offsetHeight) / 2,\r\n            x2 = x1 + self.elements.viewport.offsetWidth + widthDiff,\r\n            y2 = y1 + self.elements.viewport.offsetHeight + heightDiff,\r\n            scale = self._currentZoom;\r\n\r\n        if (scale === Infinity || isNaN(scale)) {\r\n            scale = 1;\r\n        }\r\n\r\n        var max = self.options.enforceBoundary ? 0 : Number.NEGATIVE_INFINITY;\r\n        x1 = Math.max(max, x1 / scale);\r\n        y1 = Math.max(max, y1 / scale);\r\n        x2 = Math.max(max, x2 / scale);\r\n        y2 = Math.max(max, y2 / scale);\r\n\r\n        return {\r\n            points: [fix(x1), fix(y1), fix(x2), fix(y2)],\r\n            zoom: scale,\r\n            orientation: self.data.orientation\r\n        };\r\n    }\r\n\r\n    var RESULT_DEFAULTS = {\r\n            type: 'canvas',\r\n            format: 'png',\r\n            quality: 1\r\n        },\r\n        RESULT_FORMATS = ['jpeg', 'webp', 'png'];\r\n\r\n    function _result(options) {\r\n        var self = this,\r\n            data = _get.call(self),\r\n            opts = deepExtend(clone(RESULT_DEFAULTS), clone(options)),\r\n            resultType = (typeof (options) === 'string' ? options : (opts.type || 'base64')),\r\n            size = opts.size || 'viewport',\r\n            format = opts.format,\r\n            quality = opts.quality,\r\n            backgroundColor = opts.backgroundColor,\r\n            circle = typeof opts.circle === 'boolean' ? opts.circle : (self.options.viewport.type === 'circle'),\r\n            vpRect = self.elements.viewport.getBoundingClientRect(),\r\n            ratio = vpRect.width / vpRect.height,\r\n            prom;\r\n\r\n        if (size === 'viewport') {\r\n            data.outputWidth = vpRect.width;\r\n            data.outputHeight = vpRect.height;\r\n        } else if (typeof size === 'object') {\r\n            if (size.width && size.height) {\r\n                data.outputWidth = size.width;\r\n                data.outputHeight = size.height;\r\n            } else if (size.width) {\r\n                data.outputWidth = size.width;\r\n                data.outputHeight = size.width / ratio;\r\n            } else if (size.height) {\r\n                data.outputWidth = size.height * ratio;\r\n                data.outputHeight = size.height;\r\n            }\r\n        }\r\n\r\n        if (RESULT_FORMATS.indexOf(format) > -1) {\r\n            data.format = 'image/' + format;\r\n            data.quality = quality;\r\n        }\r\n\r\n        data.circle = circle;\r\n        data.url = self.data.url;\r\n        data.backgroundColor = backgroundColor;\r\n\r\n        prom = new Promise(function (resolve, reject) {\r\n            switch(resultType.toLowerCase())\r\n            {\r\n                case 'rawcanvas':\r\n                    resolve(_getCanvas.call(self, data));\r\n                    break;\r\n                case 'canvas':\r\n                case 'base64':\r\n                    resolve(_getBase64Result.call(self, data));\r\n                    break;\r\n                case 'blob':\r\n                    _getBlobResult.call(self, data).then(resolve);\r\n                    break;\r\n                default:\r\n                    resolve(_getHtmlResult.call(self, data));\r\n                    break;\r\n            }\r\n        });\r\n        return prom;\r\n    }\r\n\r\n    function _refresh() {\r\n        _updatePropertiesFromImage.call(this);\r\n    }\r\n\r\n    function _rotate(deg) {\r\n        if (!this.options.useCanvas || !this.options.enableOrientation) {\r\n            throw 'Croppie: Cannot rotate without enableOrientation && EXIF.js included';\r\n        }\r\n\r\n        var self = this,\r\n            canvas = self.elements.canvas,\r\n            ornt;\r\n\r\n        self.data.orientation = getExifOffset(self.data.orientation, deg);\r\n        drawCanvas(canvas, self.elements.img, self.data.orientation);\r\n        _updateZoomLimits.call(self);\r\n        _onZoom.call(self);\r\n        copy = null;\r\n    }\r\n\r\n    function _destroy() {\r\n        var self = this;\r\n        self.element.removeChild(self.elements.boundary);\r\n        removeClass(self.element, 'croppie-container');\r\n        if (self.options.enableZoom) {\r\n            self.element.removeChild(self.elements.zoomerWrap);\r\n        }\r\n        delete self.elements;\r\n    }\r\n\r\n    if (window.jQuery) {\r\n        var $ = window.jQuery;\r\n        $.fn.croppie = function (opts) {\r\n            var ot = typeof opts;\r\n\r\n            if (ot === 'string') {\r\n                var args = Array.prototype.slice.call(arguments, 1);\r\n                var singleInst = $(this).data('croppie');\r\n\r\n                if (opts === 'get') {\r\n                    return singleInst.get();\r\n                }\r\n                else if (opts === 'result') {\r\n                    return singleInst.result.apply(singleInst, args);\r\n                }\r\n                else if (opts === 'bind') {\r\n                    return singleInst.bind.apply(singleInst, args);\r\n                }\r\n\r\n                return this.each(function () {\r\n                    var i = $(this).data('croppie');\r\n                    if (!i) return;\r\n\r\n                    var method = i[opts];\r\n                    if ($.isFunction(method)) {\r\n                        method.apply(i, args);\r\n                        if (opts === 'destroy') {\r\n                            $(this).removeData('croppie');\r\n                        }\r\n                    }\r\n                    else {\r\n                        throw 'Croppie ' + opts + ' method not found';\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                return this.each(function () {\r\n                    var i = new Croppie(this, opts);\r\n                    i.$ = $;\r\n                    $(this).data('croppie', i);\r\n                });\r\n            }\r\n        };\r\n    }\r\n\r\n    function Croppie(element, opts) {\r\n        if (element.className.indexOf('croppie-container') > -1) {\r\n            throw new Error(\"Croppie: Can't initialize croppie more than once\");\r\n        }\r\n        this.element = element;\r\n        this.options = deepExtend(clone(Croppie.defaults), opts);\r\n\r\n        if (this.element.tagName.toLowerCase() === 'img') {\r\n            var origImage = this.element;\r\n            addClass(origImage, 'cr-original-image');\r\n            setAttributes(origImage, {'aria-hidden' : 'true', 'alt' : '' });\r\n            var replacementDiv = document.createElement('div');\r\n            this.element.parentNode.appendChild(replacementDiv);\r\n            replacementDiv.appendChild(origImage);\r\n            this.element = replacementDiv;\r\n            this.options.url = this.options.url || origImage.src;\r\n        }\r\n\r\n        _create.call(this);\r\n        if (this.options.url) {\r\n            var bindOpts = {\r\n                url: this.options.url,\r\n                points: this.options.points\r\n            };\r\n            delete this.options['url'];\r\n            delete this.options['points'];\r\n            _bind.call(this, bindOpts);\r\n        }\r\n    }\r\n\r\n    Croppie.defaults = {\r\n        viewport: {\r\n            width: 100,\r\n            height: 100,\r\n            type: 'square'\r\n        },\r\n        boundary: { },\r\n        orientationControls: {\r\n            enabled: true,\r\n            leftClass: '',\r\n            rightClass: ''\r\n        },\r\n        resizeControls: {\r\n            width: true,\r\n            height: true\r\n        },\r\n        customClass: '',\r\n        showZoomer: true,\r\n        enableZoom: true,\r\n        enableResize: false,\r\n        mouseWheelZoom: true,\r\n        enableExif: false,\r\n        enforceBoundary: true,\r\n        enableOrientation: false,\r\n        enableKeyMovement: true,\r\n        update: function () { }\r\n    };\r\n\r\n    Croppie.globals = {\r\n        translate: 'translate3d'\r\n    };\r\n\r\n    deepExtend(Croppie.prototype, {\r\n        bind: function (options, cb) {\r\n            return _bind.call(this, options, cb);\r\n        },\r\n        get: function () {\r\n            var data = _get.call(this);\r\n            var points = data.points;\r\n            if (this.options.relative) {\r\n                points[0] /= this.elements.img.naturalWidth / 100;\r\n                points[1] /= this.elements.img.naturalHeight / 100;\r\n                points[2] /= this.elements.img.naturalWidth / 100;\r\n                points[3] /= this.elements.img.naturalHeight / 100;\r\n            }\r\n            return data;\r\n        },\r\n        result: function (type) {\r\n            return _result.call(this, type);\r\n        },\r\n        refresh: function () {\r\n            return _refresh.call(this);\r\n        },\r\n        setZoom: function (v) {\r\n            _setZoomerVal.call(this, v);\r\n            dispatchChange(this.elements.zoomer);\r\n        },\r\n        rotate: function (deg) {\r\n            _rotate.call(this, deg);\r\n        },\r\n        destroy: function () {\r\n            return _destroy.call(this);\r\n        }\r\n    });\r\n\r\n    exports.Croppie = window.Croppie = Croppie;\r\n}));\r\n","import Croppie from 'croppie'\n\nexport default {\n  name: 'VueCroppie',\n  render(h){\n    return h('div', {\n      class: this.customClass,\n      ref: 'croppieContainer',\n      id: 'croppieContainer',\n    })\n  },\n  props: {\n    boundary: Object,\n    customClass: String,\n    enableExif: Boolean,\n    enableOrientation: {\n      type: Boolean,\n      default: true\n    },\n    enableResize: {\n      type: Boolean,\n      default: true\n    },\n    enableZoom: {\n      type: Boolean,\n      default: true\n    },\n    enforceBoundary: {\n      type: Boolean,\n      default: true\n    },\n    mouseWheelZoom: {\n      type: [Boolean, String],\n      default: true\n    },\n    showZoomer: {\n      type: Boolean,\n      default: true\n    },\n    croppieInitialized: {\n      type: Function,\n      default: function()  {}\n    },\n    viewport: {\n      type: Object,\n      default: function() {\n        return {\n          width: 200,\n          height: 200,\n          type: 'square'\n        }\n      }\n    },\n    minZoom: Number,\n    maxZoom: Number\n  },\n  mounted() {\n    this.initCroppie();\n  },\n  data() {\n    return {\n      croppie: null\n    }\n  },\n  methods: {\n    initCroppie() {\n      let el = this.$refs.croppieContainer;\n\n      let options = {\n        enableExif: this.enableExif,\n        enableOrientation: this.enableOrientation,\n        enableZoom: this.enableZoom,\n        enableResize: this.enableResize,\n        enforceBoundary: this.enforceBoundary,\n        mouseWheelZoom: this.mouseWheelZoom,\n        viewport: this.viewport,\n        showZoomer: this.showZoomer,\n        minZoom: this.minZoom,\n        maxZoom: this.maxZoom\n      }\n\n      if(this.boundary) {\n        options.boundary = this.boundary;\n      }\n\n      el.addEventListener('update', (ev) => {\n        this.$emit('update', ev.detail);\n      });\n\n      this.croppie = new Croppie(el, options);\n\n      this.croppieInitialized();\n    },\n    bind(options) {\n      return this.croppie.bind(options)\n    },\n    destroy() {\n      this.croppie.destroy();\n    },\n    get(cb) {\n      if(cb){\n        cb(this.croppie.get())\n      } else {\n        return this.croppie.get()\n      }\n    },\n    rotate(angle) {\n      this.croppie.rotate(angle);\n    },\n    setZoom(value) {\n      this.croppie.setZoom(value);\n    },\n    result(options, cb) {\n      if(!options) options = {type: 'base64'}\n        return this.croppie.result(options).then(output => {\n          if(!cb) {\n            this.$emit('result', output);\n          } else {\n            cb(output);\n          }\n          return output;\n        });\n    },\n    refresh() {\n      this.croppie.destroy();\n      this.initCroppie();\n    }\n  }\n}\n","import VueCroppieComponent from './VueCroppieComponent'\n\nconst VueCroppie = {\n  install (Vue, options) {\n    Vue.component(VueCroppieComponent.name, VueCroppieComponent)\n  }\n}\n\nif (window && window.Vue) {\n  Vue.use(VueCroppie)\n}\n\nexport default VueCroppie\nexport { VueCroppieComponent }"],"names":["root","factory","this","exports","Promise","a","b","apply","arguments","c","TypeError","_state","_value","_deferreds","i","e","f","d","push","k","onFulfilled","onRejected","reject","resolve","then","g","call","length","h","j","setTimeout","setImmediate","l","Array","isArray","Object","prototype","toString","all","slice","constructor","race","_setImmediateFn","module","window","CustomEvent","event","params","bubbles","cancelable","detail","undefined","evt","document","createEvent","initCustomEvent","Event","HTMLCanvasElement","toBlob","defineProperty","value","callback","type","quality","binStr","atob","toDataURL","split","len","arr","Uint8Array","charCodeAt","Blob","CSS_TRANS_ORG","CSS_TRANSFORM","CSS_USERSELECT","cssPrefixes","emptyStyles","createElement","style","EXIF_NORM","EXIF_FLIP","vendorPrefix","prop","capProp","toUpperCase","deepExtend","destination","source","property","clone","object","dispatchChange","element","initEvent","dispatchEvent","fireEvent","css","el","styles","val","tmp","addClass","classList","add","className","setAttributes","attrs","key","setAttribute","num","v","parseInt","naturalImageDimensions","img","ornt","w","naturalWidth","naturalHeight","orient","getExifOrientation","x","width","height","TRANSLATE_OPTS","translate3d","suffix","translate","Transform","y","scale","parseFloat","parse","indexOf","fromMatrix","fromString","vals","substring","values","Croppie","globals","TransformOrigin","exifdata","Orientation","drawCanvas","canvas","orientation","ctx","getContext","save","rotate","Math","PI","drawImage","restore","_create","boundary","viewport","overlay","bw","bh","customViewportClass","options","useCanvas","enableOrientation","_hasExif","data","elements","preview","isNaN","alt","aria-grabbed","appendChild","customClass","originalX","originalY","originalDistance","vpRect","transform","self","isDragging","assignTransformCoordinates","deltaX","deltaY","imgRect","getBoundingClientRect","top","left","enforceBoundary","bottom","right","toggleGrabState","mouseDown","ev","button","preventDefault","pageX","pageY","touches","addEventListener","mouseMove","mouseUp","body","newCss","touch1","touch2","dist","sqrt","_currentZoom","_setZoomerVal","zoomer","_updateOverlay","removeEventListener","_updateCenterPoint","_triggerUpdate","LEFT_ARROW","UP_ARROW","RIGHT_ARROW","DOWN_ARROW","shiftKey","keyCode","enableKeyMovement","movement","parseKeyDown","keyMove","zoom","step","setZoom","enableZoom","wrap","zoomerWrap","change","_onZoom","origin","viewportRect","scroll","delta","targetZoom","mouseWheelZoom","ctrlKey","wheelDelta","display","showZoomer","enableResize","direction","maxWidth","maxHeight","vr","hr","minSize","resizeControls","overlayRect","currentTarget","newHeight","newWidth","_updateZoomLimits","enableExif","EXIF","z","fix","max","min","ui","applyCss","transCss","boundaries","vpWidth","vpHeight","centerFromBoundaryX","clientWidth","centerFromBoundaryY","clientHeight","curImgWidth","curImgHeight","halfWidth","halfHeight","maxX","maxY","originMinX","originMinY","minX","minY","transBoundaries","oBoundaries","_debouncedOverlay","vpData","pc","center","adj","boundRect","imgData","func","wait","immediate","timeout","context","args","callNow","clearTimeout","get","_isVisible","update","$","Prototype","trigger","offsetHeight","offsetWidth","_updatePropertiesFromImage","cssReset","transformReset","originReset","bound","_originalImageWidth","_originalImageHeight","points","pointsWidth","vpOffset","originTop","originLeft","transformTop","transformLeft","imgDim","vpDim","boundDim","vpLeft","vpTop","initial","initialZoom","defaultInitialZoom","minW","minH","minZoom","maxZoom","boundaryData","boundZoom","_getCanvas","circle","canvasWidth","outputWidth","canvasHeight","outputHeight","fillStyle","globalCompositeOperation","beginPath","arc","closePath","url","src","doExif","hasExif","Image","opacity","_resolve","removeAttribute","match","onload","getData","natDim","rect","aspectRatio","x0","y0","x1","y1","customOrientation","exif","clearRect","widthDiff","heightDiff","x2","y2","Infinity","format","_get","opts","resultType","size","backgroundColor","ratio","RESULT_FORMATS","div","_rotate","index","offset","singleInst","each","method","replacementDiv","bindOpts","defaults","enabled","relative","remove","replace","nodeName","commonJsStrict","id","ref","$refs","croppie","_this2","output","cb","Vue"],"mappings":"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"}